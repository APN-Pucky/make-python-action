# action.yml
name: 'Make python'
description: 'make, make docs, make test and publish python code'
inputs:
  publish:
    default: false
  test:
    default: true
  doc:
    default: false
runs:
  using: "composite"
  runs-on: ubuntu-latest
  container:
      image: apnpucky/ubuntu-apt:20220726175949
  steps:
    - name: work around permission issue
      run: git config --global --add safe.directory /__w/${{ github.event.repository.name }}/${{ github.event.repository.name }}
    - uses: actions/checkout@v3
      with:
        fetch-depth: "0"
    - run: git fetch --depth=1 origin +refs/tags/*:refs/tags/*
    
    - uses: APN-Pucky/make-python/make@main
      with:
        publish: ${{ inputs.publish }}
        test: ${{ inputs.test }}
        doc: ${{ inputs.doc }}
